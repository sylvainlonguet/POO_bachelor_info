## 2.5. Classes internes

### Définition et objectifs

Une classe interne (ou imbriquée) est une classe définie à l'intérieur d'une autre classe. 

Elle permet de 
- regrouper des fonctionnalités liées à la classe extérieure et de mieux organiser le code.
- faciliter l'encapsulation : la classe interne peut accéder aux membres privés de la classe externe.


### Types de classes internes

- #### Classe interne non statique (inner class)

Définie à l'intérieur d'une autre classe.
Chaque instance de la classe interne est liée à une instance de la classe externe.
Peut accéder directement aux variables et méthodes privées de la classe externe.

**exemple en Java :** 

```java
class Externe {
    private int data = 10;

    class Interne {
        void afficher() {
            System.out.println("Data = " + data); // accès direct
        }
    }
}
```

- #### Classe interne statique 

Définie avec le mot-clé static.
N’a pas de lien avec une instance de la classe externe.
Ne peut accéder qu’aux membres statiques de la classe externe.

exemple en java : 

```java
class Externe {
    private static int data = 20;

    static class InterneStatique {
        void afficher() {
            System.out.println("Data statique = " + data);
        }
    }
}
```

- #### Classe locale

Définie dans une méthode de la classe externe.
Visible uniquement dans la méthode où elle est déclarée.
Utile pour encapsuler une logique temporaire spécifique à la méthode.

```java
class Externe {
    void methode() {
        class Locale {
            void direBonjour() {
                System.out.println("Bonjour !");
            }
        }
        Locale l = new Locale();
        l.direBonjour();
    }
}
```

- #### Classe anonyme

Pas de nom. Déclarée et instanciée en même temps.

Souvent utilisée pour implémenter des interfaces ou étendre des classes de manière ponctuelle.
```java
Runnable r = new Runnable() {
    public void run() {
        System.out.println("Thread en cours...");
    }
};
new Thread(r).start();
```

### Bonnes pratiques

N’utiliser une classe interne que si elle est logiquement liée à la classe externe.
Les classes internes statiques sont préférables si l’accès à l’instance externe n’est pas nécessaire, pour éviter les références implicites inutiles.

Favoriser les classes anonymes pour des actions simples, mais les classes nommées pour une logique plus complexe ou réutilisable.

### Mise en pratique : 
- Dans un programme Java, créer une classe contenant une classe interne, en utilisant les 4 types de classes internes vues + haut (interne non statique, interne statique, locale, anonyme)
- Compiler les sources
- Pour chacun des 4 cas, quels sont les fichiers bytecode (.class) générés ?
